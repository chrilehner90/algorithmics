{"version":3,"sources":["suffixTree.js"],"names":[],"mappings":";;;;;;IAAM,IAAI;AACG,WADP,IAAI,CACI,KAAK,EAAE,GAAG,EAAE,SAAS,EAAE;0BAD/B,IAAI;;AAGN,QAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;;AAGnB,QAAI,CAAC,SAAS,GAAG;AACf,WAAK,EAAE,KAAK;AACZ,SAAG,EAAE,GAAG;AACR,eAAS,EAAE,SAAS;KACrB,CAAC;AACF,QAAI,CAAC,UAAU,GAAG,SAAS,CAAC;GAC7B;;eAZG,IAAI;;WAcF,kBAAG;AACP,UAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI,CAAA;KAC3C;;;SAhBG,IAAI;;;IAmBJ,UAAU;AACH,WADP,UAAU,GACA;0BADV,UAAU;;AAEZ,QAAI,CAAC,KAAK,GAAG,CAAC,CAAC;;;AAGf,QAAI,CAAC,MAAM,GAAG,EAAE,CAAC;;AAEjB,QAAI,CAAC,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;AAC9B,QAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;;;AAGxC,QAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC1C,QAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;GAE7C;;eAdG,UAAU;;WAgBC,yBAAC,KAAK,EAAE;;AAErB,UAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC;AAC/B,WAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;AAEpC,YAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;;;OAGhD;KACF;;;WAEK,gBAAC,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE;AAC/B,UAAI,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC;AACrC,UAAI,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;;;;KAItD;;;WAEO,kBAAC,UAAU,EAAE,KAAK,EAAE;AAC1B,aAAM,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,EAAE;AACnE,YAAI,KAAK,GAAG,SAAS,CAAC;;;AAGtB,aAAI,IAAI,KAAK,IAAI,UAAU,CAAC,QAAQ,EAAE;AACpC,cAAI,eAAe,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC;AACjE,cAAG,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,eAAe,CAAC,EAAE;AAC/D,iBAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACnC,kBAAM;WACP;SACF;;;AAGD,YAAG,KAAK,CAAC,SAAS,CAAC,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,EAAE,EAAE;AACxH,gBAAM;SACP;AACD,kBAAU,GAAG,KAAK,CAAC;AACnB,kBAAU,CAAC,SAAS,CAAC,KAAK,IAAI,CAAC,CAAC;OACjC;AACD,aAAO,UAAU,CAAC;KACnB;;;WAEW,wBAAG,EAEd;;;SA5DG,UAAU;;;AA+DhB,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC","file":"suffixTree-compiled.js","sourcesContent":["class Node {\n  constructor(start, end, textIndex) {\n\n    this.children = []; // array of references to the text\n\n    // reference inside the text\n    this.reference = {\n      start: start,\n      end: end,\n      textIndex: textIndex\n    };\n    this.suffixLink = undefined;\n  }\n\n  isLeaf() {\n    if(this.children.length === 0) return true\n  }\n}\n\nclass SuffixTree {\n  constructor() {\n    this.start = 2;\n\n    // collect all inputs\n    this.inputs = [];\n\n    this.virtualRoot = new Node();\n    this.rootNode = new Node(this.start, 1);\n\n    // virtualRoot --> root --> virtualRoot\n    this.virtualRoot.children.push(this.root);\n    this.rootNode.suffixLink = this.virtualRoot;\n\n  }\n\n  buildSuffixTree(input) {\n\n    let activeNode = this.rootNode;\n    for(let i = 2; i < input.length; i++) {\n      // construct T^i from T^i-1\n      let result = this.update(activeNode, input, i);\n      //start = result.start;\n      //activeNode = result.activeNode;\n    }\n  }\n\n  update(activeNode, input, index) {\n    let lastInsertedNode = this.rootNode;\n    let canonizedNode = this.canonize(activeNode, input);\n    // TODO: implement testAndSplit function\n    // TODO: add text indices to references in Node class\n    //var resultTestAndSplit = this.testAndSplit(canonizedNode, input, );\n  }\n\n  canonize(activeNode, input) {\n    while(activeNode.reference.end - activeNode.reference.start + 1 > 0) {\n      let child = undefined;\n\n      // find child with correct edge\n      for(var index in activeNode.children) {\n        let childStartIndex = activeNode.children[index].reference.start;\n        if(input[activeNode.reference.start] === input[childStartIndex]) {\n          child = activeNode.children[index];\n          break;\n        }\n      }\n\n      // check for minimal reference or if child is a leaf\n      if(child.reference.end - child.reference.start > activeNode.reference.end - activeNode.reference.start || child.isLeaf()) {\n        break;\n      }\n      activeNode = child;\n      activeNode.reference.start += 1;\n    }\n    return activeNode;\n  }\n\n  testAndSplit() {\n\n  }\n}\n\nmodule.exports = SuffixTree;"]}